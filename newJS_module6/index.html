<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>


  <script type="text/javascript">
    const alphabetEn = "qwertyuiop[]asdfghjkl;'zxcvbnm,./";
    const alphabetRu = "йцукенгшщзхъфывапролджэ\\ячсмитьбю.";
    const alphabetUa = "йцукенгшщзхїфівапролджє\\ячсмитьбю.";
    let keyTrainer = {
      layouts: {
      },
      currentLang: '',
      numberTrain: cheknumberTrain,
      randNum: getRandCharInAlph,
      addKeyboardLayout: function(alphabet, lang) {
        this.currentLang = lang;
        this.numberTrain();
        this.layouts[lang] = {
          topRow: [],
          middleRow: [],
          bottomRow: []
        }
        this.layouts[lang].topRow = [alphabet.slice(0, 12)];
        this.layouts[lang].middleRow = [alphabet.slice(12, 23)];
        this.layouts[lang].bottomRow = [alphabet.slice(23)];
      }
    };

    function getRandCharInAlph() {
      let str;
      let lang = this.currentLang.replace('"', '');
      let mass = (this.layouts[lang]);
      let str1 = "";
      let rand1 = [];
      for (i in mass) {
        let x = mass[i];
        for (variable in x) {
          str1 = str1 + (x[variable]);
        }
      };
      for (let r = 0; r < this.numberTrain; r++) {
        let randomIn = Math.floor(Math.random() * (str1.length - 0)) + 0;
        rand1.push(str1[randomIn]);
      };
      for (var p = 0; p < rand1.length; p++) {
        console.log(rand1[p]);
      };
      nextChar(rand1);
    };
    function nextChar(a) {
      let erors = 0;
      let fine = 0;
      for (let i = 0; i < a.length; i++) {
        let num2 = prompt(`Введите символ "${a[i]}"`);
        if (num2 == a[i]) {
          fine = fine + 1;
          console.log(fine);
        } else {
          erors = erors + 1;
        }
      }
      alert(`Результат вашего упражнения
правильно: ${fine}
не правильно: ${erors}
`);
    }
    function getLang() {
      let alphabet;
      let currentLang = prompt(
        `Введите букву алфавита какую хотите использовать клавиатуру
    en-0
    ru-1
    ua-2`);
      if (((currentLang >= 0) && (currentLang <= 2)) && (currentLang != null)) {
        currentLang = parseInt(currentLang);
        currentLang = currentLang + 1;
        switch (currentLang) {
          case 1:
            this.currentLang = "en";
            alphabet = alphabetEn;
            break;
          case 2:
            this.currentLang = "ru";
            alphabet = alphabetRu;
            break;
          case 3:
            this.currentLang = "ua";
            alphabet = alphabetUa;
            break;
          default:
        }
      } else if (((currentLang > 0) && (currentLang > 0)) || (typeof(currentLang) == "string")) {
        alert("был выбран не доступный язык");
        getLang();
      } else {}
      keyTrainer.addKeyboardLayout(alphabet, this.currentLang);
    };

    function cheknumberTrain() {
      let num = prompt("введите количество букв для тренировки");
      num = parseInt(num);
      if ((num > 0) && (!(isNaN(num)))) {
        return this.numberTrain = num;

      } else if ((isNaN(num)) && (num != NaN)) {
        alert("Вы ввели не число");
        cheknumberTrain();
      } else {
      }
    };
    getLang();
    keyTrainer.randNum();
    //keyTrainer.numberTrain;
    let qwe = keyTrainer.layouts.ru;
  </script>

</body>

</html>
